# Тестовое задание

## Автор
Сахник Арсений

## Используемое для разработки ПО
1. Язык программирования C#
2. .Net Core 3.1
3. Среда разработки Microsoft Visual Studio Community 2019

## Требования к запуску (backend + frontend) основного приложения на стороне клиента (проект BackendTestTask):
* .Net core 3.1
* Microsoft SQL Server 2017
* Две учетные записи: логин: admin, пароль: admin - пользователь со всеми привилегиями. Логин: user, пароль: user - Пользователь с ограниченными привилегиями

## Дополнительная информация по проекту
* По заданию требуется получать данные с двух исчтоников с разными API. Были выбранны сайты Finnhub и moex.
* Использовал EF Core. Бд инициализируется вместе с раннее внесенными даннми при первом запросе к серверу.
* Интервал добавления записи котировок в минутах, секретный ключ для шифрации Jwt токенов и ключ для Finnhub API задается в конфиг файле.
* Использовал аутентификацию на основе токенов. Для легковесности токены сохраняются в localStorage вместо httpOnly куков.
* Фронт написан на реакте.

## Требования к запуску (frontend) проекта на стороне клиента (frontend-test-task) (не обязательно для запука готового приложения):
* nodejs version 14 и более
## Запуск приложения
Для связи с сервером необходимо запустить проект BackendTestTask, в Visual Studio
Выполнить следующую команду в каталоге ".../frontend-test-task/"

## Installation

``` 
npm i 
```

Затем выполнить следующую команду в том же каталоге

## Run 

``` 
npm start
```

## Исправление критических ошибок
+ Git: 
  + 1 - Добавлена ветка error-correction в котором выполнены все исправления
+ Backend
  + 1 - Строка подключения теперь находится в конфиг файле
  + 2 - Cors проверяетя и работает только при разработке
  + 5 - Ненужные методы удалены
  + 8 - Добавлено логгирование в контроллерах и сервисах
  + 9 - (Не исправлено) IAPIFetcherService возвращает одну котировку. Он пытается найти котировку на Finnhub, в случае, если там её нет, пытается найти на moex. Не ясен желаемый сценарий работы сервиса
  + 13 - Теперь источники достаются из бд
  + 14 - Исправлена модель получаемых данных
  + 19 - Добавлена валидация входящих параметров
  + 20 - Теперь возвращается не список компаний, а компания, с которой произошло какое-либо действие
+ Frontend
  + 3 - Для хэширования пароля на стороне клиента постарался реализовать следующий ответ - https://stackoverflow.com/questions/3715920/is-it-worth-hashing-passwords-on-the-client-side/3716003#3716003
  + 5 - (Не исправлено) Непонятно, для чего валидировать данные в local storage. В случае, если пользователь испортит какие-либо данные, он только потеряет возможность обращаться к некоторым Api. Напишите, пожалуйста, как правильно нужно валидировать данные и на что делать акцент.
  + 6 - Метод удален
  + 13 - Система навигации и обновления заменена на методы из пакета "react-router-dom"
  + 14 - Добавлены корректные ответы от сервера и отображение ошибки на стороне клиента
  + 18 - Кнопка "1 год" теперь работает
+ Общее
  + Запрос больше не отправляется пустым 
  + В случае, если backend api недоступен будет выводиться сообщение "Network error"
  + Изменена логика маршрутизации на стороне клиента
  + Исправлено, хоть и костыльно - исключение возникает когда frontend и backend работают не через CORS
